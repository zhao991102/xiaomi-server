(self["webpackChunkxiaomi"]=self["webpackChunkxiaomi"]||[]).push([[597],{6597:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>O});r(8309),r(4916),r(4765),r(3210);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list-wrapper"},[e("div",{staticClass:"header"},[e("router-link",{attrs:{to:"/category"}},[e("i",{staticClass:"iconfont icon-back"})]),e("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:t.search.name,expression:"search.name",modifiers:{trim:!0,lazy:!0}}],attrs:{placeholder:"请输入查询关键字。。",type:"text"},domProps:{value:t.search.name},on:{change:function(e){t.$set(t.search,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),e("router-link",{attrs:{to:"/home"}},[e("i",{staticClass:"iconfont icon-home"})])],1),e("div",{staticClass:"order"},[e("span",{class:{active:"price"===t.search.orderCol},on:{click:function(e){return t.changeOrder("price")}}},[t._v(" 价格 "),e("i",{class:"iconfont icon-".concat(t.search.orderDir)})]),e("span",{class:{active:"sale"===t.search.orderCol},on:{click:function(e){return t.changeOrder("sale")}}},[t._v(" 销量 "),e("i",{class:"iconfont icon-".concat(t.search.orderDir)})]),e("span",{class:{active:"rate"===t.search.orderCol},on:{click:function(e){return t.changeOrder("rate")}}},[t._v(" 好评 "),e("i",{class:"iconfont icon-".concat(t.search.orderDir)})]),e("span",[t._v(" 筛选 ")])]),e("div",{ref:"scroll",staticClass:"content"},[e("div",[e("ul",t._l(t.list,(function(r){return e("li",[e("router-link",{attrs:{to:"/detail/".concat(r.id)}},[e("img",{attrs:{src:r.avatar,alt:""}}),e("div",{staticClass:"name-brief-price-rate-sale"},[e("h4",{domProps:{textContent:t._s(r.name)}}),e("p",{domProps:{textContent:t._s(r.brief)}}),e("div",{staticClass:"price"},[t._v(" ￥ "),e("span",{domProps:{textContent:t._s(r.price)}}),t._v("起 ")]),e("div",{staticClass:"rate-sale"},[t._v(" 好评："),e("span",{domProps:{textContent:t._s(r.rate)}}),t._v(" | 销量："),e("span",{domProps:{textContent:t._s(r.sale)}})])])])],1)})),0),e("p",{staticClass:"tip"},[t._v(" —— "),e("span",{domProps:{textContent:t._s(t.tip)}}),t._v(" —— ")])])]),e("i",{staticClass:"iconfont icon-top rocket",on:{click:t.toTop}})])},i=[],o=r(6835),s=(r(9753),r(9227));function a(t){if(Array.isArray(t))return(0,s.Z)(t)}r(2526),r(1817),r(1539),r(2165),r(8783),r(3948),r(1038);function c(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var l=r(2780);r(1703),r(6647);function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return a(t)||c(t)||(0,l.Z)(t)||h()}var d=r(4648),f=r(8534),p=(r(1058),r(2222),r(7877)),m=r(7495),g=r.n(m),v=r(7564),y=r.n(v);const b={name:"List",data:function(){return{search:{name:"",cid:parseInt(this.$route.params.cid),orderCol:"price",orderDir:"asc",pageSize:6},list:[],isLoading:!1,hasMore:!0}},computed:{tip:function(){return this.isLoading?"加载中":this.hasMore?"上拉加载更多":0===this.list.length?"暂无相关商品， 敬请期待":"已到达底部"}},methods:{changeOrder:function(t){this.isLoading||(this.$miNotice("您的操作有点频繁"),t!==this.search.orderCol?this.search.orderCol=t:this.search.orderDir="asc"===this.search.orderDir?"desc":"asc")},getList:function(){var t=arguments,e=this;return(0,f.Z)((0,o.Z)().mark((function r(){var n,i;return(0,o.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]&&t[0],r.prev=1,n||(e.list=[]),e.isLoading=!0,r.next=6,p.c.get((0,d.Z)((0,d.Z)({},e.search),{},{begin:n?e.list.length:0}));case 6:i=r.sent,e.hasMore=e.search.pageSize===i.length,e.list=n?[].concat(u(e.list),u(i)):i,e.scroll&&!n&&e.scroll.scrollTo(0,0),e.isLoading=!1,r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](1),alert(111);case 16:case"end":return r.stop()}}),r,null,[[1,13]])})))()},toTop:function(){this.scroll&&this.scroll.scrollTo(0,0,400)}},watch:{search:{handler:function(){this.getList()},deep:!0,immediate:!0},list:function(){var t=this;this.$nextTick((function(){y()(t.$refs.scroll,(function(){t.scroll?t.scroll.refresh():(t.scroll=new(g())(t.$refs.scroll,{bounce:!1,momentum:!1,deceleration:.003,click:!0}),t.scroll.on("scrollEnd",(function(){t.isLoading||t.hasMore&&t.scroll.maxScrollY===t.scroll.y&&t.getList(!0)})))}))}))}},beforeDestroy:function(){this.scroll&&(this.scroll.destroy(),this.scroll=null)},created:function(){console.log("created执行了")},mounted:function(){console.log("mounted执行了")},activated:function(){console.log("activated执行了")},deactivated:function(){console.log("deactived执行了")}},E=b;var x=r(1001),w=(0,x.Z)(E,n,i,!1,null,"f60a09c4",null);const O=w.exports},8457:(t,e,r)=>{"use strict";var n=r(9974),i=r(6916),o=r(7908),s=r(3411),a=r(7659),c=r(4411),l=r(6244),h=r(6135),u=r(8554),d=r(1246),f=Array;t.exports=function(t){var e=o(t),r=c(this),p=arguments.length,m=p>1?arguments[1]:void 0,g=void 0!==m;g&&(m=n(m,p>2?arguments[2]:void 0));var v,y,b,E,x,w,O=d(e),k=0;if(!O||this===f&&a(O))for(v=l(e),y=r?new this(v):f(v);v>k;k++)w=g?m(e[k],k):e[k],h(y,k,w);else for(E=u(e,O),x=E.next,y=r?new this:[];!(b=i(x,E)).done;k++)w=g?s(E,m,[b.value,k],!0):b.value,h(y,k,w);return y.length=k,y}},3411:(t,e,r)=>{var n=r(9670),i=r(9212);t.exports=function(t,e,r,o){try{return o?e(n(r)[0],r[1]):e(r)}catch(s){i(t,"throw",s)}}},1150:t=>{t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},6091:(t,e,r)=>{var n=r(6530).PROPER,i=r(7293),o=r(1361),s="​᠎";t.exports=function(t){return i((function(){return!!o[t]()||s[t]()!==s||n&&o[t].name!==t}))}},2222:(t,e,r)=>{"use strict";var n=r(2109),i=r(7293),o=r(3157),s=r(111),a=r(7908),c=r(6244),l=r(7207),h=r(6135),u=r(5417),d=r(1194),f=r(5112),p=r(7392),m=f("isConcatSpreadable"),g=p>=51||!i((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),v=d("concat"),y=function(t){if(!s(t))return!1;var e=t[m];return void 0!==e?!!e:o(t)},b=!g||!v;n({target:"Array",proto:!0,arity:1,forced:b},{concat:function(t){var e,r,n,i,o,s=a(this),d=u(s,0),f=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?s:arguments[e],y(o))for(i=c(o),l(f+i),r=0;r<i;r++,f++)r in o&&h(d,f,o[r]);else l(f+1),h(d,f++,o);return d.length=f,d}})},7327:(t,e,r)=>{"use strict";var n=r(2109),i=r(2092).filter,o=r(1194),s=o("filter");n({target:"Array",proto:!0,forced:!s},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},1038:(t,e,r)=>{var n=r(2109),i=r(8457),o=r(7072),s=!o((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:s},{from:i})},9753:(t,e,r)=>{var n=r(2109),i=r(3157);n({target:"Array",stat:!0},{isArray:i})},3321:(t,e,r)=>{var n=r(2109),i=r(9781),o=r(6048).f;n({target:"Object",stat:!0,forced:Object.defineProperties!==o,sham:!i},{defineProperties:o})},5003:(t,e,r)=>{var n=r(2109),i=r(7293),o=r(5656),s=r(1236).f,a=r(9781),c=i((function(){s(1)})),l=!a||c;n({target:"Object",stat:!0,forced:l,sham:!a},{getOwnPropertyDescriptor:function(t,e){return s(o(t),e)}})},9337:(t,e,r)=>{var n=r(2109),i=r(9781),o=r(3887),s=r(5656),a=r(1236),c=r(6135);n({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,r,n=s(t),i=a.f,l=o(n),h={},u=0;while(l.length>u)r=i(n,e=l[u++]),void 0!==r&&c(h,e,r);return h}})},7941:(t,e,r)=>{var n=r(2109),i=r(7908),o=r(1956),s=r(7293),a=s((function(){o(1)}));n({target:"Object",stat:!0,forced:a},{keys:function(t){return o(i(t))}})},7601:(t,e,r)=>{"use strict";r(4916);var n=r(2109),i=r(6916),o=r(1702),s=r(614),a=r(111),c=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),l=TypeError,h=o(/./.test);n({target:"RegExp",proto:!0,forced:!c},{test:function(t){var e=this.exec;if(!s(e))return h(this,t);var r=i(e,this,t);if(null!==r&&!a(r))throw new l("RegExp exec method returned something other than an Object or null");return!!r}})},4765:(t,e,r)=>{"use strict";var n=r(6916),i=r(7007),o=r(9670),s=r(4488),a=r(1150),c=r(1340),l=r(8173),h=r(7651);i("search",(function(t,e,r){return[function(e){var r=s(this),i=void 0==e?void 0:l(e,t);return i?n(i,e,r):new RegExp(e)[t](c(r))},function(t){var n=o(this),i=c(t),s=r(e,n,i);if(s.done)return s.value;var l=n.lastIndex;a(l,0)||(n.lastIndex=0);var u=h(n,i);return a(n.lastIndex,l)||(n.lastIndex=l),null===u?-1:u.index}]}))},3210:(t,e,r)=>{"use strict";var n=r(2109),i=r(3111).trim,o=r(6091);n({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},7158:function(t){(function(e,r){t.exports?t.exports=r():e.EvEmitter=r()})("undefined"!=typeof window?window:this,(function(){function t(){}let e=t.prototype;return e.on=function(t,e){if(!t||!e)return this;let r=this._events=this._events||{},n=r[t]=r[t]||[];return n.includes(e)||n.push(e),this},e.once=function(t,e){if(!t||!e)return this;this.on(t,e);let r=this._onceEvents=this._onceEvents||{},n=r[t]=r[t]||{};return n[e]=!0,this},e.off=function(t,e){let r=this._events&&this._events[t];if(!r||!r.length)return this;let n=r.indexOf(e);return-1!=n&&r.splice(n,1),this},e.emitEvent=function(t,e){let r=this._events&&this._events[t];if(!r||!r.length)return this;r=r.slice(0),e=e||[];let n=this._onceEvents&&this._onceEvents[t];for(let i of r){let r=n&&n[i];r&&(this.off(t,i),delete n[i]),i.apply(this,e)}return this},e.allOff=function(){return delete this._events,delete this._onceEvents,this},t}))},7564:function(t,e,r){
/*!
 * imagesLoaded v5.0.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
(function(e,n){t.exports?t.exports=n(e,r(7158)):e.imagesLoaded=n(e,e.EvEmitter)})("undefined"!==typeof window?window:this,(function(t,e){let r=t.jQuery,n=t.console;function i(t){if(Array.isArray(t))return t;let e="object"==typeof t&&"number"==typeof t.length;return e?[...t]:[t]}function o(t,e,s){if(!(this instanceof o))return new o(t,e,s);let a=t;"string"==typeof t&&(a=document.querySelectorAll(t)),a?(this.elements=i(a),this.options={},"function"==typeof e?s=e:Object.assign(this.options,e),s&&this.on("always",s),this.getImages(),r&&(this.jqDeferred=new r.Deferred),setTimeout(this.check.bind(this))):n.error(`Bad element for imagesLoaded ${a||t}`)}o.prototype=Object.create(e.prototype),o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)};const s=[1,9,11];o.prototype.addElementImages=function(t){"IMG"===t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);let{nodeType:e}=t;if(!e||!s.includes(e))return;let r=t.querySelectorAll("img");for(let n of r)this.addImage(n);if("string"==typeof this.options.background){let e=t.querySelectorAll(this.options.background);for(let t of e)this.addElementBackgroundImages(t)}};const a=/url\((['"])?(.*?)\1\)/gi;function c(t){this.img=t}function l(t,e){this.url=t,this.element=e,this.img=new Image}return o.prototype.addElementBackgroundImages=function(t){let e=getComputedStyle(t);if(!e)return;let r=a.exec(e.backgroundImage);while(null!==r){let n=r&&r[2];n&&this.addBackground(n,t),r=a.exec(e.backgroundImage)}},o.prototype.addImage=function(t){let e=new c(t);this.images.push(e)},o.prototype.addBackground=function(t,e){let r=new l(t,e);this.images.push(r)},o.prototype.check=function(){if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length)return void this.complete();let t=(t,e,r)=>{setTimeout((()=>{this.progress(t,e,r)}))};this.images.forEach((function(e){e.once("progress",t),e.check()}))},o.prototype.progress=function(t,e,r){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount===this.images.length&&this.complete(),this.options.debug&&n&&n.log(`progress: ${r}`,t,e)},o.prototype.complete=function(){let t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){let t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},c.prototype=Object.create(e.prototype),c.prototype.check=function(){let t=this.getIsImageComplete();t?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.img.crossOrigin&&(this.proxyImage.crossOrigin=this.img.crossOrigin),this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.currentSrc||this.img.src)},c.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},c.prototype.confirm=function(t,e){this.isLoaded=t;let{parentNode:r}=this.img,n="PICTURE"===r.nodeName?r:this.img;this.emitEvent("progress",[this,n,e])},c.prototype.handleEvent=function(t){let e="on"+t.type;this[e]&&this[e](t)},c.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},c.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},c.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},l.prototype=Object.create(c.prototype),l.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;let t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},l.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},l.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},o.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(r=e,r.fn.imagesLoaded=function(t,e){let n=new o(this,t,e);return n.jqDeferred.promise(r(this))})},o.makeJQueryPlugin(),o}))},9227:(t,e,r)=>{"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r.d(e,{Z:()=>n})},4648:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});r(7941),r(2526),r(7327),r(1539),r(5003),r(9554),r(4747),r(9337),r(3321),r(9070);function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},2780:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});r(7042),r(1539),r(8309),r(1038),r(8783),r(4916),r(7601);var n=r(9227);function i(t,e){if(t){if("string"===typeof t)return(0,n.Z)(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,n.Z)(t,e):void 0}}}}]);
//# sourceMappingURL=597.1a5f195c.js.map